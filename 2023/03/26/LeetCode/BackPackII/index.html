<!DOCTYPE html><html lang="en" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>BackPackII | Sicmatr1x's Blog</title><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"键入以继续","blurHolder":"数据检索","noResult":"无 $0 相关数据"},"code":{"codeInfo":"$0 - 共 $1 行","copy":"复制","copyFinish":"复制成功","expand":"展开"}}</script><script src="/js/gitalk.js"></script><script src="//unpkg.com/mermaid@9.2.2/dist/mermaid.min.js"></script><link rel="stylesheet" href="/css/arknights.css"><script>if (window.localStorage.getItem('theme-mode') === 'light') document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark') document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Sicmatr1x's Blog" type="application/atom+xml">
</head><body><div class="loading" style="opacity: 0"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><nav><div class="navBtn hide"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li><li class="navItem"><a class="navBlock" href="/toolkit/"><span class="navItemTitle">Toolkit</span></a></li><li class="navItem"><a class="navBlock" href="/about/"><span class="navItemTitle">About</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>BackPackII</h1><div id="post-info"><span>文章发布时间: <div class="control"><time datetime="2023-03-26T11:42:53.000Z" id="date"> 2023-03-26</time></div></span><br><span>最后更新时间: <div class="control"><time datetime="2023-03-26T08:24:07.580Z" id="updated"> 2023-03-26</time></div></span></div></div><hr><div id="post-content"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> leetcode.problems.medium;<br><br><span class="hljs-keyword">import</span> util.PrintUtil;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BackPackII</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 状态 dp(i, j): 前 i个物品放入大小为 j的背包中所获得的最大价值</span><br><span class="hljs-comment">     * weight(i): 新增物品的大小</span><br><span class="hljs-comment">     * value(i): 新增物品的价格</span><br><span class="hljs-comment">     * 递推关系:</span><br><span class="hljs-comment">     * 不放: dp(i, j) = dp(i-1, j) 表示不把第i个物品放入背包中，所以它的价值就是前i-1个物品放入大小为j的背包的最大价值</span><br><span class="hljs-comment">     * 放: dp(i-1, j - weight[i]) + value[i] 表示把第i个物品放入背包中，价值增加value[i],但是需要腾出j - weight[i]的大小放</span><br><span class="hljs-comment">     * 状态转移方程: dp(i,j) = max&#123; dp(i-1, j), dp(i-1, j - weight[i]) + value[i] &#125;</span><br><span class="hljs-comment">     * 初始状态：dp(i, 0) = dp(0, j) = 0   第0行和第0列都为0，表示没有装物品时的价值都为0</span><br><span class="hljs-comment">     * 返回值：dp(i, j)</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> m 大小为 m 的背包</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> A 每个物品的大小</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> V 每个物品的价值</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 最多能装入背包的总价值是多大</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">backPackII</span><span class="hljs-params">(<span class="hljs-type">int</span> m, <span class="hljs-type">int</span>[] A, <span class="hljs-type">int</span>[] V)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">itemNum</span> <span class="hljs-operator">=</span> A.length;<br>        <span class="hljs-type">int</span> weight[] = A;<br>        <span class="hljs-type">int</span> value[] = V;<br>        <span class="hljs-keyword">if</span> (itemNum == <span class="hljs-number">0</span> || m == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">// dp[最多取物品数量个][最大取背包大小]</span><br>        <span class="hljs-type">int</span>[][] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[itemNum][m + <span class="hljs-number">1</span>];<br>        <span class="hljs-comment">// 初始化</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; dp.length; i++) &#123; <span class="hljs-comment">// 可以省略</span><br>            dp[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; m + <span class="hljs-number">1</span>; j++) &#123;<br>            <span class="hljs-keyword">if</span> (j &lt; weight[<span class="hljs-number">0</span>]) &#123;<br>                dp[<span class="hljs-number">0</span>][j] = <span class="hljs-number">0</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                dp[<span class="hljs-number">0</span>][j] = value[<span class="hljs-number">0</span>];<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; itemNum; i++) &#123; <span class="hljs-comment">// 遍历背包</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt;= m; j++) &#123; <span class="hljs-comment">// 遍历重量</span><br>                <span class="hljs-keyword">if</span> (weight[i] &gt; j) &#123;<br>                    <span class="hljs-comment">// 新增物品质量大于当前背包，放不下</span><br>                    dp[i][j] = dp[i - <span class="hljs-number">1</span>][j];<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-comment">// 放得下，如果放入新物品要计算出背包剩余大小，看下剩余背包大小最多能装多少然后加上新增物品价格，和不放入新物品背包最大价格对比，取最大。最大价格都在上一层</span><br>                    dp[i][j] = Math.max(dp[i - <span class="hljs-number">1</span>][j], dp[i - <span class="hljs-number">1</span>][j - weight[i]] + value[i]);<br>                &#125;<br>            &#125;<br>        &#125;<br>        PrintUtil.printSubList(dp);<br>        <span class="hljs-keyword">return</span> dp[itemNum-<span class="hljs-number">1</span>][m];<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 一维数组（滚动数组）实现</span><br><span class="hljs-comment">     * 状态 F(i, j): 前 i个物品放入大小为 j的背包中所获得的最大价值</span><br><span class="hljs-comment">     * A(i): 新增物品的大小</span><br><span class="hljs-comment">     * V(i): 新增物品的价格</span><br><span class="hljs-comment">     * 状态转移方程: dp(i,j) = max&#123; dp(i-1, j), dp(i-1, j - A[i-1]) + V[i-1] &#125;</span><br><span class="hljs-comment">     * dp[i] = 前 i个物品放入大小为 j的背包中所获得的最大价值</span><br><span class="hljs-comment">     * dp[j] = max(dp[j], dp[j - A[i-1]] + V[i-1]);</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> m 大小为 m 的背包</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> A 每个物品的大小</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> V 每个物品的价值</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 最多能装入背包的总价值是多大</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">backPackII1</span><span class="hljs-params">(<span class="hljs-type">int</span> m, <span class="hljs-type">int</span>[] A, <span class="hljs-type">int</span>[] V)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">itemNum</span> <span class="hljs-operator">=</span> A.length;<br>        <span class="hljs-type">int</span> weight[] = A;<br>        <span class="hljs-type">int</span> value[] = V;<br>        <span class="hljs-keyword">if</span> (itemNum == <span class="hljs-number">0</span> || m == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">// dp[最大取背包大小]</span><br>        <span class="hljs-type">int</span>[] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[m + <span class="hljs-number">1</span>];<br>        <span class="hljs-comment">// 初始化</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; m + <span class="hljs-number">1</span>; j++) &#123;<br>            <span class="hljs-keyword">if</span> (j &lt; weight[<span class="hljs-number">0</span>]) &#123;<br>                dp[j] = <span class="hljs-number">0</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                dp[j] = value[<span class="hljs-number">0</span>];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; itemNum; i++) &#123; <span class="hljs-comment">// 遍历背包</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> m; j &gt;= weight[i]; j--) &#123; <span class="hljs-comment">// 遍历重量</span><br>                dp[j] = Math.max(dp[j], dp[j - weight[i]] + value[i]);<br>            &#125;<br>        &#125;<br>        PrintUtil.printSubList(dp);<br>        <span class="hljs-keyword">return</span> dp[m];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/2023/04/09/AI/%E6%97%A0%E9%97%A8%E6%A7%9B%E4%BA%BA%E4%BA%BA%E5%8F%AF%E7%94%A8%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BAchatglm-6b-int4-slim/">← Next 无门槛人人可用本地搭建chatglm-6b-int4-slim</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2023/03/04/Java/Java%E6%97%A5%E6%9C%9F%E8%BD%AC%E6%8D%A2%E5%B7%A5%E5%85%B7%E7%B1%BB/">Java日期转换工具类 Prev →</a></div></div></div><div id="comments"><div class="selector"><button class="gitalk-sel"></button></div><div id="gitalk"></div></div></div><div class="bottom-btn"><div><a id="to-top" onClick="scrolls.scrolltop();" title="回到顶部" style="opacity: 0; display: none;">∧</a><a id="to-index" href="#toc-div" title="文章目录">≡</a><a id="color-mode" onClick="colorMode.change()" title="切换主题"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Sicmatr1x</a></h1><div id="description"><p>INTP/Traveller/Stoicism/Crypto-anarchism/Minimalism/Cosmopolitanism/English learner/Crypto/Java Engineer</p></div></div><div id="aside-block"></div><footer><nobr>构建自 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> 使用主题 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr>主题作者 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script class="pjax-js">reset=_=>{gitalk = new Gitalk({
 clientID: '',
 clientSecret: '',
 repo: 'blog-comments',
 owner: 'Sicmatr1x',
 admin: ['Sicmatr1x'],
 distractionFreeMode: false,
 id: 
});
if (document.querySelector("#gitalk")) gitalk.render("gitalk");code.findCode();}</script><script src="/js/arknights.js"></script><script src="/js/pjax.js"></script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script></body></html>